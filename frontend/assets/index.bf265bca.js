import{B as e,u as i}from"./useTable.5d27771c.js";import{T as n}from"./FormAction.9732afc1.js";import{u as t}from"./index.005634a4.js";import{_ as a,ah as o,j as r,ai as s}from"./index.2956b203.js";import{c as l,s as d}from"./channel.data.2b814f47.js";import{d as m,g as c}from"./channel.466b4802.js";import p from"./ChannelDetail.a5e1edb4.js";import u from"./ChannelModal.ad55190d.js";import{A as h,a0 as j,B as f,D as x,w as b,a5 as w,a1 as D,ac as g,ad as y}from"./vendor.84d2d683.js";/* empty css              */import"./useForm.07071468.js";import"./useFormItem.75e32247.js";/* empty css               */import"./index.a66a0969.js";import"./useWindowSizeFn.a02e5cb7.js";import"./index.7a603658.js";/* empty css               *//* empty css               */import"./useContentViewHeight.fee9e617.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import"./useSortable.817b3359.js";/* empty css                *//* empty css                *//* empty css                */import"./download.eecfd47d.js";import"./index.8bcb94a9.js";import"./index.1350911d.js";/* empty css               */import"./role.334f6c1b.js";import"./index.e52a9253.js";/* empty css               */const S=h({name:"ChannelPage",components:{AButton:o,BasicTable:e,TableAction:n,SysParamDetailDrawer:p,SysParamUpdateDrawer:u},setup(){const e=r(),{hasPermission:n}=s(),[a,{openDrawer:o}]=t(),[p,{openDrawer:u}]=t(),[h,{reload:j}]=i({title:"系统参数",api:c,columns:l,formConfig:{labelWidth:120,schemas:d},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:120,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});return{hasPermission:n,registerTable:h,registerDetailDrawer:a,registerUpdateDrawer:p,handleRetrieveDetail:function(e){o(!0,{record:e})},handleInsert:function(){u(!0,{isUpdateView:!1})},handleUpdate:function(e){u(!0,{record:e,isUpdateView:!0})},handleDelete:function(e){return i=this,n=null,t=function*(){yield m([e.id]),yield j()},new Promise(((e,a)=>{var o=e=>{try{s(t.next(e))}catch(i){a(i)}},r=e=>{try{s(t.throw(e))}catch(i){a(i)}},s=i=>i.done?e(i.value):Promise.resolve(i.value).then(o,r);s((t=t.apply(i,n)).next())}));var i,n,t},handleView:function(i){e(`/system/player/index?vid=${i.id}`)},handleSuccess:function(){j()}}}}),v=y(" 新增 ");var C=a(S,[["render",function(e,i,n,t,a,o){const r=j("a-button"),s=j("TableAction"),l=j("BasicTable"),d=j("SysParamDetailDrawer"),m=j("SysParamUpdateDrawer");return f(),x("div",null,[b(l,{onRegister:e.registerTable},{toolbar:w((()=>[e.hasPermission("channel_create")?(f(),D(r,{key:0,type:"primary",onClick:e.handleInsert},{default:w((()=>[v])),_:1},8,["onClick"])):g("",!0)])),action:w((({record:i})=>[b(s,{actions:[{icon:"clarity:play-line",tooltip:"点击播放",onClick:e.handleView.bind(null,i)},{tooltip:"详情",ifShow:e.hasPermission("channel_retrieve"),icon:"ant-design:eye-outlined",onClick:e.handleRetrieveDetail.bind(null,i)},{tooltip:"编辑",ifShow:e.hasPermission("channel_update"),icon:"clarity:note-edit-line",onClick:e.handleUpdate.bind(null,i)},{tooltip:"删除",ifShow:e.hasPermission("channel_delete"),icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:e.handleDelete.bind(null,i)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),b(d,{onRegister:e.registerDetailDrawer},null,8,["onRegister"]),b(m,{onRegister:e.registerUpdateDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}]]);export{C as default};
