var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,n=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&r(e,a,t[a]);if(o)for(var a of o(t))s.call(t,a)&&r(e,a,t[a]);return e},i=(e,t,a)=>new Promise(((o,l)=>{var s=e=>{try{n(a.next(e))}catch(t){l(t)}},r=e=>{try{n(a.throw(e))}catch(t){l(t)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,r);n((a=a.apply(e,t)).next())}));import{B as d,a as c}from"./index.a66a0969.js";import{B as p,u as m}from"./useForm.07071468.js";import"./FormAction.9732afc1.js";import{g as u}from"./role.334f6c1b.js";import{z as f,bq as g,aF as b,A as h,r as P,u as v,k as w,a0 as y,B as x,a1 as j,a5 as I,w as M,a4 as O}from"./vendor.84d2d683.js";/* empty css               */import{p as F,a as k}from"./account.d0c5cf5d.js";import{_ as S}from"./index.2956b203.js";const B=[{title:"ID",dataIndex:"id",width:60},{title:"用户名",dataIndex:"username",width:150},{title:"昵称",dataIndex:"nickname",width:150},{title:"邮箱",dataIndex:"email",width:180},{title:"状态",dataIndex:"status",width:60,customRender:({record:e})=>{const t=e.status,a=t?"启用":"停用";return f(g,{color:t?"green":"red"},(()=>a))}},{title:"创建时间",dataIndex:"createTime",width:180,format:e=>b(e).format("YYYY-MM-DD HH:mm:ss")}],A=[{field:"username",label:"用户名",component:"Input",colProps:{xl:8,lg:12},componentProps:{placeholder:"请输入，支持模糊匹配"}},{field:"nickname",label:"昵称",component:"Input",colProps:{xl:8,lg:12}},{field:"email",label:"邮箱",component:"Input",colProps:{xl:8,lg:12}},{field:"status",label:"状态",component:"Select",colProps:{xl:8,lg:12},componentProps:{options:[{label:"启用",value:!0},{label:"停用",value:!1}]}},{field:"createTime",label:"创建时间",component:"RangePicker",colProps:{xl:8,lg:12},componentProps:{allowClear:!0,showTime:!0}}],C=[{field:"username",label:"用户名",component:"Input",helpMessage:["用户名长度为4至20位","只能由大小写字母、数字组成"],rules:[{min:4,max:20,message:"用户名长度为4至20位"},{pattern:/^[a-zA-Z\d]+$/,message:"只能由大小写字母、数字组成"}],componentProps:{placeholder:"请填写用户名"}},{field:"password",label:"密码",component:"InputPassword",helpMessage:["密码度为8至20位","不能使用纯数字的密码"],required:!0,rules:[{required:!0,message:"请输入密码"},{min:8,max:20,message:"密码长度为8至20位"},{pattern:/\D/,message:"不能使用纯数字的密码"}],componentProps:{placeholder:"请填写密码"}},{field:"status",label:"状态",component:"Switch",helpMessage:["点亮=启用，默认为启用状态"],defaultValue:!0,componentProps:{checkedChildren:"启用",unCheckedChildren:"停用"}},{field:"roles",label:"角色",component:"ApiSelect",helpMessage:["支持多选！"],componentProps:{mode:"multiple",api:u,labelField:"roleName",valueField:"roleValue"}},{field:"nickname",label:"昵称",component:"Input",rules:[{min:2,max:20,message:"昵称长度为2至20位"}]},{field:"email",label:"邮箱",component:"Input"}];var R=S(h({name:"AccountModal",components:{BasicModal:d,BasicForm:p},emits:["success","register"],setup(e,{emit:o}){const l=P(!0),s=P(""),[r,{setFieldsValue:d,updateSchema:p,resetFields:u,validate:f}]=m({labelWidth:100,baseColProps:{span:24},schemas:C,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:b,closeModal:h}]=c((e=>i(this,null,(function*(){yield u(),b({confirmLoading:!1}),l.value=!!(null==e?void 0:e.isUpdate),v(l)&&(s.value=e.record.id,yield d(n({},e.record))),yield p([{field:"password",show:!v(l)}])}))));return{registerModal:g,registerForm:r,getTitle:w((()=>v(l)?"编辑账号":"新增账号")),handleSubmit:function(){return i(this,null,(function*(){try{const i=yield f();b({confirmLoading:!0}),v(l)?yield k(s.value,i):yield F(i),h(),o("success",{isUpdate:v(l),values:(e=n({},i),r={id:s.value},t(e,a(r)))})}finally{b({confirmLoading:!1})}var e,r}))}}}}),[["render",function(e,t,a,o,l,s){const r=y("BasicForm"),n=y("BasicModal");return x(),j(n,O(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:I((()=>[M(r,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])}]]),T=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));export{R as A,T as a,B as c,A as s};
