!function(){function n(n,e,t,a,o,r,i){try{var c=n[r](i),u=c.value}catch(l){return void t(l)}c.done?e(u):Promise.resolve(u).then(a,o)}function e(e){return function(){var t=this,a=arguments;return new Promise((function(o,r){var i=e.apply(t,a);function c(e){n(i,o,r,c,u,"next",e)}function u(e){n(i,o,r,c,u,"throw",e)}c(void 0)}))}}function t(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var a,o,r=[],i=!0,c=!1;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return r}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return a(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=n[t];return a}System.register(["./useTable-legacy.fbc5fe88.js","./FormAction-legacy.aae69255.js","./account-legacy.a9d31e64.js","./index-legacy.c6aa8123.js","./AccountModal-legacy.8751915d.js","./index-legacy.5f587d09.js","./vendor-legacy.d8193a32.js","./index-legacy.f25f109a.js","./useForm-legacy.157dc112.js","./useFormItem-legacy.04db47e9.js","./index-legacy.f25f109a2.js","./index-legacy.02d6902c.js","./index-legacy.f25f109a7.js","./index-legacy.f25f109a8.js","./useWindowSizeFn-legacy.d4ab4bc0.js","./useContentViewHeight-legacy.0007ffb7.js","./index-legacy.f25f109a12.js","./index-legacy.f25f109a13.js","./index-legacy.f25f109a6.js","./index-legacy.f25f109a3.js","./useSortable-legacy.46962df8.js","./index-legacy.f25f109a10.js","./index-legacy.f25f109a11.js","./index-legacy.f25f109a14.js","./download-legacy.cf27d1d1.js","./index-legacy.ac6cddf2.js","./index-legacy.63558327.js","./role-legacy.0e58e65a.js"],(function(n){"use strict";var a,o,r,i,c,u,l,s,f,d,y,g,h,m,p,b,j,v,x,S,w,A,T;return{setters:[function(n){a=n.B,o=n.u},function(n){r=n.T},function(n){i=n.b,c=n.d},function(n){u=n.b},function(n){l=n.A,s=n.c,f=n.s},function(n){d=n._,y=n.ah,g=n.j,h=n.ai,m=n.f},function(n){p=n.A,b=n.P,j=n.a0,v=n.B,x=n.D,S=n.w,w=n.aC,A=n.a5,T=n.ad},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var C=p({name:"AccountManagement",components:{AButton:y,BasicTable:a,AccountModal:l,TableAction:r},setup:function(){var n=m().createMessage,a=g(),r=h().hasPermission,l=t(u(),2),d=l[0],y=l[1].openModal,p=b({}),j=t(o({title:"账号列表",api:i,rowKey:"id",columns:s,showIndexColumn:!1,formConfig:{labelWidth:120,schemas:f,autoSubmitOnEnter:!0,autoAdvancedLine:1,fieldMapToTime:[["createTime",["createTimeStart","createTimeEnd"],"YYYY-MM-DD HH:mm:ss"]]},useSearchForm:!0,showTableSetting:!0,tableSetting:{fullScreen:!0},bordered:!0,canResize:!1,handleSearchInfoFn:function(n){return n},actionColumn:{width:150,title:"操作",dataIndex:"action",slots:{customRender:"action"}}}),2),v=j[0],x=j[1],S=x.reload,w=x.updateTableDataRecord;function A(){return(A=e(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t.id).then((function(){n.success("已成功删除账号")})).catch((function(){n.error("删除账号失败")}));case 2:return e.next=4,S();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{hasPermission:r,registerTable:v,registerModal:d,handleSelect:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";p.deptId=n,S()},handleCreate:function(){y(!0,{isUpdate:!1})},handleEdit:function(n){y(!0,{record:n,isUpdate:!0})},handleDelete:function(n){return A.apply(this,arguments)},handleSuccess:function(n){var e=n.isUpdate,t=n.values;if(e)w(t.id,t);else S()},handleView:function(n){a("/system/account/"+n.id)},searchInfo:p}}}),I=T("新增账号");n("default",d(C,[["render",function(n,e,t,a,o,r){var i=j("a-button"),c=j("TableAction"),u=j("BasicTable"),l=j("AccountModal");return v(),x("div",null,[S(u,{onRegister:n.registerTable,searchInfo:n.searchInfo},w({action:A((function(e){var t=e.record;return[S(c,{actions:[{icon:"clarity:note-edit-line",tooltip:"编辑用户资料",onClick:n.handleEdit.bind(null,t),ifShow:function(){return n.hasPermission(["account_update"])}},{icon:"ant-design:delete-outlined",color:"error",tooltip:"删除此账号",popConfirm:{title:"是否确认删除",placement:"left",confirm:n.handleDelete.bind(null,t)},ifShow:function(){return n.hasPermission(["account_delete"])}}]},null,8,["actions"])]})),_:2},[n.hasPermission(["account_add"])?{name:"toolbar",fn:A((function(){return[S(i,{type:"primary",onClick:n.handleCreate},{default:A((function(){return[I]})),_:1},8,["onClick"])]}))}:void 0]),1032,["onRegister","searchInfo"]),S(l,{onRegister:n.registerModal,onSuccess:n.handleSuccess},null,8,["onRegister","onSuccess"])])}]]))}}}))}();
