var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(r,t,o)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,i=(e,r,t)=>new Promise(((o,s)=>{var i=e=>{try{n(t.next(e))}catch(r){s(r)}},a=e=>{try{n(t.throw(e))}catch(r){s(r)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);n((t=t.apply(e,r)).next())}));import{B as a,u as n}from"./useForm.07071468.js";import"./FormAction.9732afc1.js";import{B as l,a as m}from"./index.005634a4.js";import{a as d}from"./channel.data.2b814f47.js";import{p,a as c}from"./channel.466b4802.js";import{_ as u}from"./index.2956b203.js";import{A as j,r as f,k as b,u as w,a0 as y,B as x,a1 as g,a5 as h,w as v,a4 as F}from"./vendor.84d2d683.js";import"./useFormItem.75e32247.js";/* empty css               */import"./index.a66a0969.js";import"./useWindowSizeFn.a02e5cb7.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./download.eecfd47d.js";import"./index.8bcb94a9.js";import"./index.1350911d.js";/* empty css               */import"./role.334f6c1b.js";var B=u(j({name:"SysParamUpdateDrawer",components:{BasicDrawer:l,BasicForm:a},emits:["success","register"],setup(e,{emit:a}){const l=f(!0);let u;const[j,{resetFields:y,setFieldsValue:x,validate:g}]=n({labelCol:{span:4},wrapperCol:{span:20},baseColProps:{span:24},schemas:d,showActionButtonGroup:!1}),[h,{setDrawerProps:v,closeDrawer:F}]=m((e=>i(this,null,(function*(){var i;yield y(),v({confirmLoading:!1}),l.value=!!(null==e?void 0:e.isUpdateView),w(l)&&(yield x(((e,i)=>{for(var a in i||(i={}))t.call(i,a)&&s(e,a,i[a]);if(r)for(var a of r(i))o.call(i,a)&&s(e,a,i[a]);return e})({},e.record))),u=(null==(i=e.record)?void 0:i.id)||null}))));return{registerDrawer:h,registerForm:j,getTitle:b((()=>w(l)?"编辑":"新增")),handleSubmit:function(){return i(this,null,(function*(){try{const e=yield g();v({confirmLoading:!0}),u?yield p(u,e):yield c(e),F(),a("success")}finally{v({confirmLoading:!1})}}))}}}}),[["render",function(e,r,t,o,s,i){const a=y("BasicForm"),n=y("BasicDrawer");return x(),g(n,F(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"40%",onOk:e.handleSubmit}),{default:h((()=>[v(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])}]]);export{B as default};
