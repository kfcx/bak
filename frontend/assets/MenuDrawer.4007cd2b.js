var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(r,t,o)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,s=(e,r,t)=>new Promise(((o,i)=>{var s=e=>{try{n(t.next(e))}catch(r){i(r)}},a=e=>{try{n(t.throw(e))}catch(r){i(r)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,a);n((t=t.apply(e,r)).next())}));import{B as a,u as n}from"./useForm.07071468.js";import"./FormAction.9732afc1.js";import{f as l}from"./menu.data.21104757.js";import{B as m,a as d}from"./index.005634a4.js";import{g as p,p as c,c as u}from"./menu.17e77c51.js";import{_ as f}from"./index.2956b203.js";import{A as j,r as w,u as y,k as b,a0 as g,B as x,a1 as v,a5 as h,w as F,a4 as B}from"./vendor.84d2d683.js";import"./useFormItem.75e32247.js";/* empty css               */import"./index.a66a0969.js";import"./useWindowSizeFn.a02e5cb7.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./download.eecfd47d.js";import"./index.8bcb94a9.js";import"./index.1350911d.js";/* empty css               */var D=f(j({name:"MenuDrawer",components:{BasicDrawer:m,BasicForm:a},emits:["success","register"],setup(e,{emit:a}){const m=w(!0);let f;const[j,{resetFields:g,setFieldsValue:x,updateSchema:v,validate:h}]=n({labelCol:{span:4},wrapperCol:{span:20},baseColProps:{span:24},schemas:l,showActionButtonGroup:!1}),[F,{setDrawerProps:B,closeDrawer:D}]=d((e=>s(this,null,(function*(){var s;yield g(),B({confirmLoading:!1}),m.value=!!(null==e?void 0:e.isUpdate),y(m)&&(yield x(((e,s)=>{for(var a in s||(s={}))t.call(s,a)&&i(e,a,s[a]);if(r)for(var a of r(s))o.call(s,a)&&i(e,a,s[a]);return e})({},e.record))),f=(null==(s=e.record)?void 0:s.id)||null;const a=yield p();yield v({field:"parent_id",componentProps:{treeData:a}})}))));return{registerDrawer:F,registerForm:j,getTitle:b((()=>y(m)?"编辑菜单":"新增菜单")),handleSubmit:function(){return s(this,null,(function*(){try{const e=yield h();B({confirmLoading:!0}),f?yield c(f,e):yield u(e),D(),a("success")}finally{B({confirmLoading:!1})}}))}}}}),[["render",function(e,r,t,o,i,s){const a=g("BasicForm"),n=g("BasicDrawer");return x(),v(n,B(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"40%",onOk:e.handleSubmit}),{default:h((()=>[F(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])}]]);export{D as default};
