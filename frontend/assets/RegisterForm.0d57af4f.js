import{u as e,a,L as s,_ as l,b as o}from"./LoginFormTitle.57d17caa.js";import{A as r,a_ as i,ap as t,r as n,P as c,k as d,u,B as m,D as p,w as f,a5 as g,a$ as y,ad as v,J as x,aT as h,aa as w,ac as b}from"./vendor.84d2d683.js";import"./useFormItem.75e32247.js";/* empty css               *//* empty css              */import{S as k}from"./index.8bcb94a9.js";import{C as _}from"./index.1350911d.js";import{e as P,b as C,a as j,f as z}from"./index.2956b203.js";const S=r({setup(r){const S=i.Item,T=t.Password,U=P(),{t:E}=C(),{handleBackLogin:F,getLoginState:I}=e(),{notification:L,createErrorModal:R}=z(),{prefixCls:$}=j("register"),B=n(),D=n(!1),M=c({account:"",password:"",confirmPassword:"",email:"",sms:"",policy:!1}),{getFormRules:q}=a(M),{validForm:A}=o(B),G=d((()=>u(I)===s.REGISTER));function J(){return e=this,a=null,s=function*(){const e=yield A();if(e)try{D.value=!0;const a=yield U.register({username:e.account,email:e.email,code:e.sms,password:e.password,password2:e.confirmPassword,policy:e.policy,mode:"none"});a&&(L.success({message:E("sys.login.registerSuccessTitle"),description:`${E("sys.login.registerSuccessDesc")}: ${a}`,duration:3}),F())}catch(a){R({title:E("sys.api.errorTip"),content:a.message||E("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${$}`)||document.body})}finally{D.value=!1}},new Promise(((l,o)=>{var r=e=>{try{t(s.next(e))}catch(a){o(a)}},i=e=>{try{t(s.throw(e))}catch(a){o(a)}},t=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);t((s=s.apply(e,a)).next())}));var e,a,s}return(e,a)=>u(G)?(m(),p(w,{key:0},[f(l,{class:"enter-x"}),f(u(i),{class:"p-4 enter-x",model:u(M),rules:u(q),ref:(e,a)=>{a.formRef=e,B.value=e}},{default:g((()=>[f(u(S),{name:"account",class:"enter-x"},{default:g((()=>[f(u(t),{class:"fix-auto-fill",size:"large",value:u(M).account,"onUpdate:value":a[0]||(a[0]=e=>u(M).account=e),placeholder:u(E)("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),f(u(S),{name:"email",class:"enter-x"},{default:g((()=>[f(u(t),{size:"large",value:u(M).email,"onUpdate:value":a[1]||(a[1]=e=>u(M).email=e),placeholder:u(E)("sys.login.email"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),f(u(S),{name:"sms",class:"enter-x"},{default:g((()=>[f(u(_),{size:"large",class:"fix-auto-fill",disabled:!1,emailCode:u(M).email,value:u(M).sms,"onUpdate:value":a[2]||(a[2]=e=>u(M).sms=e),placeholder:u(E)("sys.login.mailCode")},null,8,["emailCode","value","placeholder"])])),_:1}),f(u(S),{name:"password",class:"enter-x"},{default:g((()=>[f(u(k),{size:"large",value:u(M).password,"onUpdate:value":a[3]||(a[3]=e=>u(M).password=e),placeholder:u(E)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),f(u(S),{name:"confirmPassword",class:"enter-x"},{default:g((()=>[f(u(T),{size:"large",visibilityToggle:"",value:u(M).confirmPassword,"onUpdate:value":a[4]||(a[4]=e=>u(M).confirmPassword=e),placeholder:u(E)("sys.login.confirmPassword")},null,8,["value","placeholder"])])),_:1}),f(u(S),{class:"enter-x",name:"policy"},{default:g((()=>[f(u(y),{checked:u(M).policy,"onUpdate:checked":a[5]||(a[5]=e=>u(M).policy=e),size:"small"},{default:g((()=>[v(x(u(E)("sys.login.policy")),1)])),_:1},8,["checked"])])),_:1}),f(u(h),{type:"submit",class:"enter-x",size:"large",block:"",onClick:J,loading:D.value},{default:g((()=>[v(x(u(E)("sys.login.registerButton")),1)])),_:1},8,["loading"]),f(u(h),{size:"large",block:"",class:"mt-4 enter-x",onClick:u(F)},{default:g((()=>[v(x(u(E)("sys.login.backSignIn")),1)])),_:1},8,["onClick"])])),_:1},8,["model","rules"])],64)):b("",!0)}});export{S as default};
