!function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,u=[],a=!0,i=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);a=!0);}catch(c){i=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return u}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e,n,r,o,u,a){try{var i=t[u](a),c=i.value}catch(s){return void n(s)}i.done?e(c):Promise.resolve(c).then(r,o)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(o,u){var a=t.apply(e,r);function i(t){n(a,o,u,i,c,"next",t)}function c(t){n(a,o,u,i,c,"throw",t)}i(void 0)}))}}var o=document.createElement("style");o.innerHTML=".vben-countdown-input .ant-input-group-addon{padding-right:0;border:none;background-color:transparent}.vben-countdown-input .ant-input-group-addon button{font-size:14px}\n",document.head.appendChild(o),System.register(["./index-legacy.5f587d09.js","./vendor-legacy.d8193a32.js","./useFormItem-legacy.04db47e9.js"],(function(e){"use strict";var n,o,u,a,i,c,s,l,f,d,p,v,m,y,g,b,h,C,S,x,w,A,k,B,T,j,z,F;return{setters:[function(t){n=t.e,o=t.b,u=t.a,a=t._,i=t.h,c=t.f,s=t.w},function(t){l=t.r,f=t.af,d=t.u,p=t.A,v=t.aT,m=t.k,y=t.am,g=t.a0,b=t.B,h=t.a1,C=t.a5,S=t.ad,x=t.J,w=t.a4,A=t.aC,k=t.ao,B=t.a6,T=t.aB,j=t.aU,z=t.w},function(t){F=t.u}],execute:function(){var I=p({name:"CountButton",components:{Button:v},props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},emailCode:{type:String,default:""},beforeStartFunc:{type:Function,default:null}},setup:function(t){var e=l(!1),a=n(),s=function(t){var e,n=l(t),r=l(!1);function o(){e&&window.clearInterval(e)}function u(){r.value=!1,o(),e=null}function a(){d(r)||e||(r.value=!0,e=setInterval((function(){1===d(n)?(u(),n.value=t):n.value-=1}),1e3))}function i(){n.value=t,u()}return f((function(){i()})),{start:a,reset:i,restart:function(){i(),a()},clear:o,stop:u,currentCount:n,isStart:r}}(t.count),p=s.currentCount,v=s.isStart,g=s.start,b=s.reset,h=o().t,C=c(),S=C.notification,x=C.createErrorModal,w=u("register").prefixCls,A=m((function(){return d(v)?h("component.countdown.sendText",[d(p)]):h("component.countdown.normalText")}));function k(){return(k=r(regeneratorRuntime.mark((function n(){var r,o,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.beforeStartFunc)||!i(r)){n.next=13;break}return e.value=!0,n.prev=3,n.next=6,r();case 6:n.sent&&g();case 8:return n.prev=8,e.value=!1,n.finish(8);case 11:n.next=33;break;case 13:if(o=t.emailCode){n.next=19;break}return S.error({message:h("sys.api.operationFailed"),description:"".concat(h("sys.login.emailPlaceholder")),duration:3}),n.abrupt("return");case 19:return n.prev=19,e.value=!0,n.next=23,a.emailVerify({email:o,mode:"none"});case 23:(u=n.sent)&&(g(),S.success({message:h("sys.login.registerSuccessTitle"),description:u,duration:3})),n.next=30;break;case 27:n.prev=27,n.t0=n.catch(19),x({title:h("sys.api.errorTip"),content:n.t0.message||h("sys.api.networkExceptionMsg"),getContainer:function(){return document.body.querySelector(".".concat(w))||document.body}});case 30:return n.prev=30,e.value=!1,n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[3,,8,11],[19,27,30,33]])})))).apply(this,arguments)}return y((function(){void 0===t.value&&b()})),{handleStart:function(){return k.apply(this,arguments)},currentCount:p,loading:e,getButtonText:A,isStart:v}}});var $=a(I,[["render",function(t,e,n,r,o,u){var a=g("Button");return b(),h(a,w(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:C((function(){return[S(x(t.getButtonText),1)]})),_:1},16,["disabled","onClick","loading"])}]]),E=p({name:"CountDownInput",components:{CountButton:$},inheritAttrs:!1,props:{value:{type:String},size:{type:String,validator:function(t){return["default","large","small"].includes(t)}},count:{type:Number,default:60},emailCode:{type:String,default:""},sendCodeApi:{type:Function,default:null}},setup:function(e){return{prefixCls:u("countdown-input").prefixCls,state:t(F(e),1)[0]}}});e("C",s(a(E,[["render",function(t,e,n,r,o,u){var a=g("CountButton"),i=g("a-input");return b(),h(i,w(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),A({addonAfter:C((function(){return[z(a,{size:t.size,count:t.count,value:t.state,emailCode:t.emailCode,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","emailCode","beforeStartFunc"])]})),_:2},[k(Object.keys(t.$slots).filter((function(t){return"addonAfter"!==t})),(function(e){return{name:e,fn:C((function(n){return[B(t.$slots,e,T(j(n||{})))]}))}}))]),1040,["class","size","value"])}]])));s($)}}}))}();
